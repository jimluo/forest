<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="basic_usage.html"><strong aria-hidden="true">2.</strong> Basic Usage</a></li><li class="chapter-item expanded "><a href="configuration.html"><strong aria-hidden="true">3.</strong> Configuration</a></li><li class="chapter-item expanded "><a href="trouble_shooting.html"><strong aria-hidden="true">4.</strong> Trouble Shooting</a></li><li class="chapter-item expanded "><a href="glossary.html"><strong aria-hidden="true">5.</strong> Glossary</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <p align="center">
    <img width="380" height="269" src="./img/forest_logo.png">
</p>
<p><a href="https://app.circleci.com/pipelines/github/ChainSafe/forest?branch=main"><img alt="build status" src="https://img.shields.io/circleci/build/gh/ChainSafe/forest/main?style=for-the-badge" height="20"></a>
<a href="https://github.com/ChainSafe/forest/releases/latest"><img alt="GitHub release (latest by date)" src="https://img.shields.io/github/v/release/ChainSafe/forest?style=for-the-badge" height="20"></a>
<a href="https://opensource.org/licenses/Apache-2.0"><img alt="Apache License" src="https://img.shields.io/badge/License-Apache%202.0-blue.svg?style=for-the-badge" height="20"></a>
<a href="https://opensource.org/licenses/MIT"><img alt="MIT License" src="https://img.shields.io/badge/License-MIT-yellow.svg?style=for-the-badge" height="20"></a>
<a href="https://twitter.com/ChainSafeth"><img alt="Twitter" src="https://img.shields.io/twitter/follow/ChainSafeth.svg?style=for-the-badge&label=Twitter&color=1DA1F2" height="20"></a>
<a href="https://discord.gg/Q6A3YA2"><img alt="Discord" src="https://img.shields.io/discord/593655374469660673.svg?style=for-the-badge&label=Discord&logo=discord" height="20"></a></p>
<p>Forest is an implementation of <a href="https://filecoin.io/">Filecoin</a> written in Rust.
The implementation takes a modular approach to building a full Filecoin node in two parts — (i) building Filecoin’s security critical systems in Rust from the <a href="https://filecoin-project.github.io/specs/">Filecoin Protocol Specification</a>, specifically the virtual machine, blockchain, and node system, and (ii) integrating functional components for storage mining and storage &amp; retrieval markets to compose a fully functional Filecoin node implementation.</p>
<h2 id="functionality"><a class="header" href="#functionality">Functionality</a></h2>
<ul>
<li>Filecoin State Tree Synchronization</li>
<li>Filecoin JSON-RPC Server</li>
<li>Ergonomic Message Pool</li>
<li>Wallet CLI</li>
<li>Process Metrics &amp; Monitoring</li>
</ul>
<h2 id="disclaimer"><a class="header" href="#disclaimer">Disclaimer</a></h2>
<p>The Forest implementation of the Filecoin protocol is alpha software which should not yet be integrated into production workflows. The team is working to provide reliable, secure, and efficient interfaces to the Filecoin ecosystem. If you would like to chat, please reach out over Discord on the ChainSafe server linked above.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="basic-usage"><a class="header" href="#basic-usage">Basic Usage</a></h1>
<h2 id="build"><a class="header" href="#build">Build</a></h2>
<h3 id="dependencies"><a class="header" href="#dependencies">Dependencies</a></h3>
<ul>
<li>Rust <code>rustc &gt;= 1.58.1</code></li>
<li>Rust WASM target <code>wasm32-unknown-unknown</code></li>
</ul>
<pre><code class="language-shell">rustup install stable
rustup target add wasm32-unknown-unknown
</code></pre>
<ul>
<li>OS Base-Devel/Build-Essential</li>
<li>Clang compiler</li>
<li>OpenCL bindings</li>
</ul>
<pre><code class="language-shell"># Ubuntu
sudo apt install build-essential clang ocl-icd-opencl-dev

# Archlinux
sudo pacman -S base-devel clang ocl-icd
</code></pre>
<h3 id="commands"><a class="header" href="#commands">Commands</a></h3>
<pre><code class="language-bash">make release
</code></pre>
<h2 id="forest-import-snapshot-mode"><a class="header" href="#forest-import-snapshot-mode">Forest Import Snapshot Mode</a></h2>
<p>Before running <code>forest</code> in the normal mode you must seed the database with the Filecoin state tree from the latest snapshot. To do that, we will download the latest snapshot provided by Protocol Labs and start <code>forest</code> using the <code>--import-snapshot</code> flag. After the snapshot has been successfully imported, you can start <code>forest</code> without the <code>--import-snapshot</code> flag.</p>
<h3 id="commands-1"><a class="header" href="#commands-1">Commands</a></h3>
<p>Download the latest snapshot provided by Protocol Labs:</p>
<pre><code class="language-bash">curl -sI https://fil-chain-snapshots-fallback.s3.amazonaws.com/mainnet/minimal_finality_stateroots_latest.car | perl -ne '/x-amz-website-redirect-location:\s(.+)\.car/ &amp;&amp; print &quot;$1.sha256sum\n$1.car&quot;' | xargs wget
</code></pre>
<p>If desired, you can check the checksum using the instructions <a href="https://lotus.filecoin.io/docs/set-up/chain-management/#lightweight-snapshot">here</a>.</p>
<p>Import the snapshot using <code>forest</code>:</p>
<pre><code class="language-bash">./target/release/forest --target-peer-count 50 --encrypt-keystore false --import-snapshot /path/to/snapshot/file
</code></pre>
<h2 id="forest-synchronization-mode"><a class="header" href="#forest-synchronization-mode">Forest Synchronization Mode</a></h2>
<h3 id="commands-2"><a class="header" href="#commands-2">Commands</a></h3>
<h4 id="mainnet"><a class="header" href="#mainnet">Mainnet</a></h4>
<p>Start the <code>forest</code> node:</p>
<pre><code class="language-bash">./target/release/forest --target-peer-count 50 --encrypt-keystore false
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="configuration"><a class="header" href="#configuration">Configuration</a></h1>
<p>The <code>forest</code> process has a set of configurable values which determine the behavior of the node. All values can be set through process flags or through a configuration file. If a configuration is provided through the flag and the configuation file, the flag value will be given preference.</p>
<h2 id="flags"><a class="header" href="#flags">Flags</a></h2>
<p>When starting <code>forest</code> you can configure the behavior of the process through the use of the following flags:</p>
<div class="table-wrapper"><table><thead><tr><th>Flag</th><th>Value</th><th>Description</th></tr></thead><tbody>
<tr><td>--config</td><td>OS File Path</td><td>Path to TOML file containing configuration</td></tr>
<tr><td>--genesis</td><td>OS File Path</td><td>CAR file with genesis state</td></tr>
<tr><td>--rpc</td><td>Boolean</td><td>Toggles the RPC API on</td></tr>
<tr><td>--port</td><td>Integer</td><td>Port for JSON-RPC communication</td></tr>
<tr><td>--token</td><td>String</td><td>Client JWT token to use for JSON-RPC authentication</td></tr>
<tr><td>--metrics-port</td><td>Integer</td><td>Port used for metrics collection server</td></tr>
<tr><td>--kademlia</td><td>Boolean</td><td>Determines whether Kademilia is allowed</td></tr>
<tr><td>--mdns</td><td>Boolean</td><td>Determines whether MDNS is allowed</td></tr>
<tr><td>--import-snapshot</td><td>OS File Path</td><td>Path to snapshot CAR file</td></tr>
<tr><td>--import-chain</td><td>OS File Path</td><td>Path to chain CAR file</td></tr>
<tr><td>--skip-load</td><td>Boolean</td><td>Skips loading CAR File and uses header to index chain</td></tr>
<tr><td>--req-window</td><td>Integer</td><td>Sets the number of tipsets requested over chain exchange</td></tr>
<tr><td>--tipset-sample-size</td><td>Integer</td><td>Number of tipsets to include in the sample which determines the network head during synchronization</td></tr>
<tr><td>--target-peer-count</td><td>Integer</td><td>Amount of peers the node should maintain a connection with</td></tr>
<tr><td>--encrypt-keystore</td><td>Boolean</td><td>Controls whether the keystore is encrypted</td></tr>
</tbody></table>
</div>
<h2 id="configuration-file"><a class="header" href="#configuration-file">Configuration File</a></h2>
<p>Alternatively, when starting <code>forest</code> you can define a TOML configuration file and provide it to the process with the <code>--config</code> flag or through the <code>FOREST_CONFIG_PATH</code> environment variable.</p>
<p>The following is an sample configuration file: </p>
<pre><code class="language-toml">genesis = &quot;/path/to/genesis/file&quot;
rpc = true
port = 1234
token = &quot;0394j3094jg0394jg34g&quot;
metrics-port = 2345
kademlia = true
mdns = true
import-snapshot = /path/to/snapshot/file
import-chain = /path/to/chain/file
skip-load = false
req-window = 100
tipset-sample-size = 10
target-peer-count = 100
encrypt-keystore = false
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="trouble-shooting"><a class="header" href="#trouble-shooting">Trouble Shooting</a></h1>
<h2 id="common-issues"><a class="header" href="#common-issues">Common Issues</a></h2>
<h4 id="file-descriptor-limits"><a class="header" href="#file-descriptor-limits">File Descriptor Limits</a></h4>
<p>To properly manage the Filecoin state tree with RocksDB, Forest requires a custom allocation of file descriptors. Please set the process file descriptor limits to <code>1048576</code> to avoid stalling the node.</p>
<p>For MacOS and Linux distributions, this can be done by using the <code>usize</code> command. Using this command will set it for the current session. On MacOS, setting the limit too high will default it to a max of 
<code>12288</code>. There are many guides online to override this along with specific Linux guides to make the new max persistent.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="algorand"><a class="header" href="#algorand">Algorand</a></h2>
<p><a href="https://www.algorand.com/">Algorand</a> is a proof-of-stake blockchain cryptocurrency protocol.</p>
<h2 id="blake2b"><a class="header" href="#blake2b">BLAKE2b</a></h2>
<p>BLAKE2 is a cryptographic hash function based on <a href="https://en.wikipedia.org/wiki/BLAKE_(hash_function)">BLAKE</a>. The design goal was to replace the widely used, but broken, MD5 and SHA-1 algorithms in applications requiring high performance in software.</p>
<h2 id="bls"><a class="header" href="#bls">BLS</a></h2>
<p><a href="https://en.wikipedia.org/wiki/BLS_digital_signature">BLS</a> stands for Boneh–Lynn–Shacham cryptographic signature scheme, which is a cryptographic signature scheme which allows a user to verify that a signer is authentic.</p>
<h2 id="cbor"><a class="header" href="#cbor">CBOR</a></h2>
<p><a href="https://cbor.io/">CBOR</a> stands for the Concise Binary Object Representation, which is a data format whose design goals include the possibility of extremely small code size, fairly small message size, and extensibility without the need for version negotiation.</p>
<h2 id="cid"><a class="header" href="#cid">CID</a></h2>
<p><a href="https://spec.filecoin.io/#section-libraries.multiformats.cids">CID</a> is short for Content Identifier, a self describing content address used throughout the IPFS ecosystem. CIDs are used in Filecoin to identify files submitted to the decentralized storage network. For more detailed information, see <a href="https://github.com/ipld/cid">the github documentation for it</a>.</p>
<h2 id="ipld"><a class="header" href="#ipld">IPLD</a></h2>
<p><a href="https://github.com/ipld">IPLD</a> stands for InterPlanetary Linked Data, which is a series of standards and formats for describing data in a content-addressing-emphatic way.</p>
<h2 id="jwt"><a class="header" href="#jwt">JWT</a></h2>
<p><a href="https://en.wikipedia.org/wiki/JSON_Web_Token">JWT</a> stands for JSON Web Token, which is a proposed Internet standard for creating data with optional signature and/or optional encryption whose payload holds JSON that asserts some number of claims. The tokens are signed either using a private secret or a public/private key.</p>
<h2 id="secp"><a class="header" href="#secp">SECP</a></h2>
<p>types of elliptic curves used for ECDSA see <a href="https://www.johndcook.com/blog/2018/08/21/a-tale-of-two-elliptic-curves/">here</a></p>
<h2 id="multisig"><a class="header" href="#multisig">multisig</a></h2>
<p>A <a href="https://lotus.filecoin.io/lotus/manage/multisig/">multi-signature</a> (multisig) wallet refers to a wallet that requires multiple keys to authorize a <code>FIL</code> transactions.</p>
<h2 id="tipset"><a class="header" href="#tipset">Tipset</a></h2>
<p>Tipset is a structure that contains a non-empty collection of blocks that have distinct miners and all specify identical epoch, parents, weight, height, state root, receipt root</p>
<h2 id="tipsetkey"><a class="header" href="#tipsetkey">Tipsetkey</a></h2>
<p>A set of CIDs forming a unique key for a tipset.</p>
<h2 id="mempool"><a class="header" href="#mempool">mempool</a></h2>
<p>mempool stands for the Message Pool, which is the component of forest that handles pending messages for inclusion in the chain. Messages are added either directly for locally published messages or through pubsub propagation.</p>
<h2 id="merkle"><a class="header" href="#merkle">Merkle</a></h2>
<p><a href="https://en.wikipedia.org/wiki/Merkle_tree">Merkle tree</a> is a tree in which every node is labelled with the cryptographic hash of a data block, and every node that is not a leaf (called a branch, inner node, or inode) is labelled with the cryptographic hash of the labels of its child nodes. A hash tree allows efficient and secure verification of the contents of a large data structure.</p>
<h2 id="ipfs"><a class="header" href="#ipfs">IPFS</a></h2>
<p><a href="https://github.com/ipfs/ipfs">IPFS</a> stands for InterPlanetary File System which is a peer-to-peer hypermedia protocol to make the web faster, safer, and more open.</p>
<h2 id="proof-of-spacetime-post"><a class="header" href="#proof-of-spacetime-post">Proof of Spacetime (PoSt)</a></h2>
<p>PoSt stands for Proof-of-Spacetime is a procedure by which a storage-miner can prove to the Filecoin network they have stored and continue to store a unique copy of some data on behalf of the network for a period of time.</p>
<h2 id="hamt"><a class="header" href="#hamt">HAMT</a></h2>
<p><a href="https://en.wikipedia.org/wiki/Hash_array_mapped_trie">HAMT</a> stands for Hash array mapped trie, which is an implementation of an associative array that combines the characteristics of a hash table and an array mapped trie.</p>
<h2 id="vrf"><a class="header" href="#vrf">VRF</a></h2>
<p><a href="https://en.wikipedia.org/wiki/Verifiable_random_function">VRF</a> stands for a Verifiable Random Function that receives a Secret Key (SK) and a seed and outputs proof of correctness and output value. VRFs must yield a proof of correctness and a unique &amp; efficiently verifiable output.</p>
<h2 id="mdns"><a class="header" href="#mdns">MDNS</a></h2>
<p><a href="https://en.wikipedia.org/wiki/Multicast_DNS">MDNS</a> stands for Multicast DNS, which is a protocol, that resolves hostnames to IP addresses within small networks that do not include a local name server.</p>
<h2 id="kademlia"><a class="header" href="#kademlia">Kademlia</a></h2>
<p><a href="https://en.wikipedia.org/wiki/Kademlia">Kademlia</a> is a distributed hash table for decentralized peer-to-peer computer networks.</p>
<h2 id="libp2p"><a class="header" href="#libp2p">LibP2P</a></h2>
<p><a href="https://libp2p.io/">LibP2P</a> is a modular system of protocols, specifications and libraries that enable the development of peer-to-peer network applications.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->

        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </body>
</html>
